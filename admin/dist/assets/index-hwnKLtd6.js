import{j as e,T as ue,aw as xe,r as b,a as ie,ax as D,u as je,ay as ce,B as le,a0 as Ee,a1 as Te,W as Me,as as Re,Q as be,R as Oe}from"./index-RN40GIN3.js";import{P as De}from"./index-cCWBJ18I.js";import{d as Be}from"./ExpandMore-dGJJoQ68.js";import{s as fe}from"./spinner-raFFnsSl.js";import{D as ke,a as Pe}from"./DialogTitle-6TEnE4on.js";import{d as Ne,e as Le,f as we,q as he,F as Fe,a as Ge,b as Ie,c as qe,G as ve,u as _e,E as We,D as He,C as Ue}from"./index-OCY1AeLZ.js";import{T as X}from"./TextField-nZuO35Fk.js";import{C as Ve}from"./Checkbox-FaetVbke.js";import{a as $e,A as ze,b as Je}from"./AccordionSummary-JsEy7Or1.js";import{C as Qe}from"./Container-JzitWhMj.js";import{G as Ce}from"./Grid-Eqeh4S9L.js";import{T as Ye,a as Ke,b as Ze,c as ye,d as K,e as Xe}from"./TableRow-_CXUst88.js";import"./FormControl-hzYzaU_O.js";import"./OutlinedInput-5k8n8BVu.js";import"./useFormControl-ymE63IOh.js";import"./InputLabel-OdKkbQhf.js";import"./Select-LOUEVqMY.js";import"./react-is.production.min-pGgGHoNV.js";import"./FormHelperText-7DzgE79G.js";import"./SwitchBase-5ivMydxc.js";function et(){return e.jsxs(e.Fragment,{children:[e.jsx(ue,{variant:"h3",component:"h3",gutterBottom:!0,children:"Movies"}),e.jsx(ue,{variant:"subtitle2",children:"Manage movies"})]})}const tt=xe.injectEndpoints({endpoints:f=>({scrapeWebsite:f.mutation({query:c=>({url:"scraper/scrape",method:"POST",body:c})})}),overrideExisting:!1}),{useScrapeWebsiteMutation:at}=tt,nt=xe.injectEndpoints({endpoints:f=>({getMovies:f.query({query:c=>({url:"movies",params:c}),providesTags:["Movies"]}),getRandomMovies:f.query({query:c=>({url:"movies/random",params:c?{type:c}:void 0})}),getMovie:f.query({query:c=>({url:`movies/${c}`})}),createMovie:f.mutation({query:c=>({url:"movies",method:"POST",body:c}),invalidatesTags:["Movies"]}),updateMovie:f.mutation({query:({itemId:c,data:k})=>({url:`movies/${c}`,method:"PUT",body:k}),invalidatesTags:["Movies"]}),deleteMovie:f.mutation({query:c=>({url:`movies/${c}`,method:"DELETE"}),invalidatesTags:["Movies"]}),likeMovie:f.mutation({query:c=>({url:`movies/${c}/like`,method:"POST"})}),dislikeMovie:f.mutation({query:c=>({url:`movies/${c}/dislike`,method:"POST"})})}),overrideExisting:!1}),{useGetMoviesQuery:rt,useGetRandomMoviesQuery:Ht,useGetMovieQuery:Ut,useCreateMovieMutation:st,useUpdateMovieMutation:it,useDeleteMovieMutation:ot,useLikeMovieMutation:Vt,useDislikeMovieMutation:$t}=nt,lt=xe.injectEndpoints({endpoints:f=>({getGenres:f.query({query:c=>({url:"genre",params:c}),providesTags:["Genres"]}),createGenre:f.mutation({query:c=>({url:"genre",method:"POST",body:c}),invalidatesTags:["Genres"]}),deleteGenre:f.mutation({query:c=>({url:`genre/${c}`,method:"DELETE"}),invalidatesTags:["Genres"]})}),overrideExisting:!1}),{useGetGenresQuery:ct,useCreateGenreMutation:dt,useDeleteGenreMutation:ut}=lt;function pt(f){var A;const[c,k]=b.useState(""),[B,S]=b.useState(!1),{data:C,isLoading:E,isError:u}=ct(),[p,N]=dt(),[a,L]=ut(),[P,y]=b.useState(null),{genres:j,setGenres:M}=f,Y=(A=C==null?void 0:C.genres)==null?void 0:A.filter(m=>m.title.toLowerCase().includes(c.toLowerCase())),R=m=>{k(m.target.value),S(!0)},z=m=>{M([...j,m]),k(""),S(!1)},G=async()=>{const m={id:Date.now(),type:"new",title:c},x=await p(m);if(console.log("res ",x),!x.data){alert("error adding genre");return}const F=x==null?void 0:x.data;M([...j,F]),k(""),S(!1)},J=async m=>{const x=await a(m);if(x!=null&&x.data){D.success("Genre deleted",{position:"top-right"});let F=[...j];F=F.filter(Z=>(Z==null?void 0:Z._id)!=m),M(F)}else D.error("Error deleting genre",{position:"top-right"});y(null)},H=m=>{let x=[...j];x=x.filter(F=>(F==null?void 0:F._id)!=m),M(x)},U=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:j==null?void 0:j.map(m=>e.jsxs("div",{className:"flex items-center gap-2 bg-[#e5e7eb] text-sm p-2 rounded-[20px] text-black  ",children:[e.jsxs("div",{children:[" ",m==null?void 0:m.title]}),e.jsx("div",{onClick:()=>H(m==null?void 0:m._id),className:"cursor-pointer  ",children:"x"})]},m==null?void 0:m._id))});return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"border border-gray-300 p-2 rounded-md w-full",children:[U(),e.jsx("input",{type:"text",placeholder:"Search or add genres...",value:c,className:"py-2",onChange:R})]}),e.jsx("div",{className:"relative",children:B&&e.jsxs("div",{className:"absolute z-10 w-full top-[6px] bg-white shadow-md rounded-md",children:[E&&e.jsx("div",{className:"p-4",children:"Loading genres..."}),u&&e.jsx("div",{className:"p-4 text-red-500",children:"Error fetching genres!"}),!E&&!u&&e.jsxs("div",{className:"flex flex-col",children:[Y.length>0&&e.jsx("ul",{className:"py-2 overflow-auto",children:Y.map(m=>e.jsxs("li",{className:"cursor-pointer hover:bg-gray-100 p-2 flex items-center justify-between",onClick:()=>z(m),children:[e.jsx("div",{children:m.title}),e.jsx("div",{className:"underline text-sm",onClick:()=>y(m),children:"Delete genre"})]},m._id))}),Y.length===0&&c.length>0&&e.jsx("div",{className:"cursor-pointer p-2 text-sm bg-blue-500 text-white rounded-md w-[fit-content] px-3",onClick:G,children:"Add New Genre"})]})]})})]}),e.jsxs(ke,{open:P!=null,onClose:()=>y(null),"aria-labelledby":"delete-genre","aria-describedby":"Dialog to confirm genre deletion",children:[e.jsx(Pe,{id:"alert-dialog-title",children:"Delete Genre"}),e.jsx(Ne,{children:e.jsxs(Le,{id:"alert-dialog-description",children:["Are you sure you want to delete ",P==null?void 0:P.title," genre?"]})}),e.jsxs(we,{children:[e.jsx(ie,{onClick:()=>y(null),children:"Cancel"}),e.jsx(ie,{onClick:()=>J(P._id),autoFocus:!0,children:"Delete"})]})]})]})}const gt=({callback:f,item:c})=>{const[k,B]=b.useState(""),[S,C]=b.useState(""),[E,u]=b.useState(""),[p,N]=b.useState(""),[a,L]=b.useState(""),[P,y]=b.useState(""),[j,M]=b.useState(""),[Y,R]=b.useState(""),[z,G]=b.useState([]),[J,H]=b.useState(!1);je();const[U,A]=ce.useState("");ce.useState(!1);const[m,x]=at(),[F,Z]=st(),[i,o]=it(),[r,d]=ce.useState([]),q=c==null||c==null,Q=n=>{B(n.title),C(n.desc),u(n.video),L(n.img),y(n.year),N(n.trailer),H((n==null?void 0:n.isSeries)??!1),R(n.duration),M(n.ageRating),console.log("movie ",n),d(n.genre)},_=b.useCallback(async()=>{const n={title:k,desc:S,video:E,img:a,imgTitle:a,trailer:p,year:P,genre:r,isSeries:J};D.loading("saving...",{position:"top-right"});const l=await F(n);l!=null&&l.data?(D.dismiss(),D.success("saved",{position:"top-right"})):(D.dismiss(),D.error("failed",{position:"top-right"}),console.error(l))},[k,S,E,a,P,p,z,J,r]),s=async()=>{const n=r==null?void 0:r.map(h=>h==null?void 0:h._id),l={title:k,desc:S,video:E,img:a,imgTitle:a,trailer:p,year:P,genre:[...n],isSeries:J};D.loading("saving...",{position:"top-right"});const g=await i({itemId:c._id,data:l});console.log("genreObjs ",r),console.log("item._id, data ",c._id,l),g!=null&&g.data?(D.dismiss(),D.success("saved",{position:"top-right"})):(D.dismiss(),D.error("failed",{position:"top-right"}),console.error(g))};b.useEffect(()=>{c!=null&&Q(c)},[c]);const t=async()=>{if(!U){D.error("Please enter url",{position:"top-right"});return}const l=await m({url:U});let g=l==null?void 0:l.data;if(g!=null&&g.title){let h=g;if(B(h.title),C(h.description),L(h.imageUrl),y(h.yearOfRelease),A(""),M(h.ageRating),R(h.duration),Array.isArray(h==null?void 0:h.genre)){let O=[],I=h==null?void 0:h.genre;I==null||I.forEach(ee=>{O.push({_id:`${Date.now()}${Math.random()*1e3}`,type:"new",title:ee})}),d(O)}}},v=()=>e.jsxs($e,{className:"mb-5 border-b-2  py-2",children:[e.jsx(ze,{expandIcon:e.jsx(Be,{}),"aria-controls":"panel1-content",id:"panel1-header",className:"font-[600]",children:"Auto fill movie details?"}),e.jsxs(Je,{children:[e.jsxs("div",{className:"text-sm font-[600]",children:["Pull from ",e.jsx("span",{className:"underline text-black",children:e.jsx("a",{target:"_blank",href:"https://reelgood.com/",children:"https://reelgood.com/"})})]}),e.jsx(X,{label:"Movie Url",fullWidth:!0,focused:!0,value:U,onChange:n=>{A(n.target.value)}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{variant:"contained",onClick:t,children:"Pull"}),x.isLoading?e.jsx("img",{src:fe,alt:"Spinner"}):void 0]})]})]});return e.jsx(e.Fragment,{children:e.jsxs(le,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[q?v():void 0,a?e.jsx(le,{sx:{width:"100%",height:"100px",display:"flex",justifyContent:"center"},children:e.jsx("img",{src:a,style:{height:"100%"}})}):null,e.jsx(X,{label:"Title",fullWidth:!0,required:!0,value:k,onChange:n=>{B(n.target.value)}}),e.jsx(X,{label:"Description",fullWidth:!0,multiline:!0,value:S,onChange:n=>{C(n.target.value)}}),e.jsx(X,{label:"Trailer link",fullWidth:!0,value:p,onChange:n=>{N(n.target.value)}}),e.jsx(X,{label:"Video link",fullWidth:!0,value:E,onChange:n=>{u(n.target.value)}}),e.jsx(X,{label:"Image link",fullWidth:!0,value:a,onChange:n=>{L(n.target.value)}}),e.jsx(X,{label:"Year",fullWidth:!0,value:P,onChange:n=>{y(n.target.value)}}),e.jsx(X,{label:"Age rating",fullWidth:!0,value:j,onChange:n=>{M(n.target.value)}}),e.jsx(X,{label:"Duration",fullWidth:!0,value:Y,onChange:n=>{R(n.target.value)}}),e.jsxs(le,{margin:1,sx:{"& .MuiTextField-root":{m:1}},children:[e.jsx(ue,{children:"Genres"}),e.jsx(pt,{setGenres:d,genres:r})]}),e.jsxs(le,{margin:1,sx:{"& .MuiTextField-root":{m:1}},children:[e.jsx(Ve,{checked:J,onClick:()=>H(n=>!n)})," ",e.jsx(ue,{component:"span",children:"Is serie"})]}),e.jsx(le,{marginLeft:1,marginTop:3,children:c?e.jsx(ie,{variant:"contained",onClick:s,children:"Update"}):e.jsx(ie,{variant:"contained",onClick:_,children:"Save"})}),Z.isLoading||o.isLoading?e.jsx("img",{src:fe,alt:"Spinner"}):void 0]})})},ht=[{id:"default",label:"Default"},{id:"descAlpha",label:"Descending Alphabetical"},{id:"ascAlpha",label:"Ascending Alphabetical"},{id:"dateAddedAsc",label:"Date Added Ascending"},{id:"dateAddedDesc",label:"Date Added Descending"}];let mt="text-[#03042499] bg-[#fff] focus:text-[#030424] border-2 p-2 px-[20px] font-[400] rounded-[11px] text-[18px] flex items-center h-[44px] min-w-[150px] justify-between";const ft=f=>{const{open:c,onClick:k}=f;f.initialValues;const B=f.formik,[S,C]=b.useState(void 0),{activeSort:E}=B.values,u=b.useRef(null),p=a=>{var L;(L=u.current)!=null&&L.contains(a.target)||c&&k()};b.useEffect(()=>(document.addEventListener("mousemove",N),document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("mousemove",N)}));const N=a=>{var P;const L=(P=u.current)==null?void 0:P.contains(a.target);L&&!c&&(k(),C("hover")),!L&&c&&(k(),C(void 0))};return e.jsxs(he,{ref:u,as:"div",className:"relative z-20",children:[e.jsx(he.Button,{as:b.Fragment,children:e.jsxs("div",{onClick:()=>{k(),C("click")},className:`${mt} cursor-pointer hidden sm:flex `,children:[e.jsx("div",{className:"w-full h-full text-[#03042499]",children:"Sort"}),e.jsxs("div",{className:"flex flex-col justify-center text-[#B3B3B3]",children:[e.jsx(Fe,{className:" mb-[-4px]"}),e.jsx(Ge,{className:" mt-[-4px]"})]})]})}),e.jsx(Ie,{as:b.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",show:c,children:e.jsx(he.Items,{static:!0,as:"ul",className:"",children:e.jsx(qe,{value:B,children:e.jsx("div",{className:"absolute z-20 mt-3 bg-white p-3 rounded-md space-y-5 min-w-[282px] border",children:ht.map((a,L)=>{const P=E==a.id;return e.jsx(he.Item,{children:e.jsx("li",{onClick:()=>{B.setFieldValue("activeSort",a.id)},style:{backgroundColor:P?"#F3F0FF":"unset",fontWeight:P?"600":"unset"},className:"h-[30px] rounded-lg flex items-center pl-2 cursor-pointer",children:a.label})},a.id)})})})})})]})};var Se={exports:{}};(function(f,c){(function(k,B){f.exports=B(b)})(Ee,k=>(()=>{var B={703:(u,p,N)=>{var a=N(414);function L(){}function P(){}P.resetWarningCache=L,u.exports=function(){function y(Y,R,z,G,J,H){if(H!==a){var U=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw U.name="Invariant Violation",U}}function j(){return y}y.isRequired=y;var M={array:y,bigint:y,bool:y,func:y,number:y,object:y,string:y,symbol:y,any:y,arrayOf:j,element:y,elementType:y,instanceOf:j,node:y,objectOf:j,oneOf:j,oneOfType:j,shape:j,exact:j,checkPropTypes:P,resetWarningCache:L};return M.PropTypes=M,M}},697:(u,p,N)=>{u.exports=N(703)()},414:u=>{u.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:u=>{u.exports=k}},S={};function C(u){var p=S[u];if(p!==void 0)return p.exports;var N=S[u]={exports:{}};return B[u](N,N.exports,C),N.exports}C.n=u=>{var p=u&&u.__esModule?()=>u.default:()=>u;return C.d(p,{a:p}),p},C.d=(u,p)=>{for(var N in p)C.o(p,N)&&!C.o(u,N)&&Object.defineProperty(u,N,{enumerable:!0,get:p[N]})},C.o=(u,p)=>Object.prototype.hasOwnProperty.call(u,p),C.r=u=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})};var E={};return(()=>{C.r(E),C.d(E,{default:()=>Z});var u=C(98),p=C.n(u),N=C(697),a=C.n(N);function L(){return L=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])}return i},L.apply(this,arguments)}var P=function(i){var o=i.pageClassName,r=i.pageLinkClassName,d=i.page,q=i.selected,Q=i.activeClassName,_=i.activeLinkClassName,s=i.getEventListener,t=i.pageSelectedHandler,v=i.href,n=i.extraAriaContext,l=i.pageLabelBuilder,g=i.rel,h=i.ariaLabel||"Page "+d+(n?" "+n:""),O=null;return q&&(O="page",h=i.ariaLabel||"Page "+d+" is your current page",o=o!==void 0?o+" "+Q:Q,r!==void 0?_!==void 0&&(r=r+" "+_):r=_),p().createElement("li",{className:o},p().createElement("a",L({rel:g,role:v?void 0:"button",className:r,href:v,tabIndex:q?"-1":"0","aria-label":h,"aria-current":O,onKeyPress:t},s(t)),l(d)))};P.propTypes={pageSelectedHandler:a().func.isRequired,selected:a().bool.isRequired,pageClassName:a().string,pageLinkClassName:a().string,activeClassName:a().string,activeLinkClassName:a().string,extraAriaContext:a().string,href:a().string,ariaLabel:a().string,page:a().number.isRequired,getEventListener:a().func.isRequired,pageLabelBuilder:a().func.isRequired,rel:a().string};const y=P;function j(){return j=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])}return i},j.apply(this,arguments)}var M=function(i){var o=i.breakLabel,r=i.breakAriaLabel,d=i.breakClassName,q=i.breakLinkClassName,Q=i.breakHandler,_=i.getEventListener,s=d||"break";return p().createElement("li",{className:s},p().createElement("a",j({className:q,role:"button",tabIndex:"0","aria-label":r,onKeyPress:Q},_(Q)),o))};M.propTypes={breakLabel:a().oneOfType([a().string,a().node]),breakAriaLabel:a().string,breakClassName:a().string,breakLinkClassName:a().string,breakHandler:a().func.isRequired,getEventListener:a().func.isRequired};const Y=M;function R(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return i??o}function z(i){return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},z(i)}function G(){return G=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(i[d]=r[d])}return i},G.apply(this,arguments)}function J(i,o){for(var r=0;r<o.length;r++){var d=o[r];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(i,d.key,d)}}function H(i,o){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,d){return r.__proto__=d,r},H(i,o)}function U(i,o){if(o&&(z(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A(i)}function A(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function m(i){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},m(i)}function x(i,o,r){return o in i?Object.defineProperty(i,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[o]=r,i}var F=function(i){(function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),t&&H(s,t)})(_,i);var o,r,d,q,Q=(d=_,q=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var s,t=m(d);if(q){var v=m(this).constructor;s=Reflect.construct(t,arguments,v)}else s=t.apply(this,arguments);return U(this,s)});function _(s){var t,v;return function(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}(this,_),x(A(t=Q.call(this,s)),"handlePreviousPage",function(n){var l=t.state.selected;t.handleClick(n,null,l>0?l-1:void 0,{isPrevious:!0})}),x(A(t),"handleNextPage",function(n){var l=t.state.selected,g=t.props.pageCount;t.handleClick(n,null,l<g-1?l+1:void 0,{isNext:!0})}),x(A(t),"handlePageSelected",function(n,l){if(t.state.selected===n)return t.callActiveCallback(n),void t.handleClick(l,null,void 0,{isActive:!0});t.handleClick(l,null,n)}),x(A(t),"handlePageChange",function(n){t.state.selected!==n&&(t.setState({selected:n}),t.callCallback(n))}),x(A(t),"getEventListener",function(n){return x({},t.props.eventListener,n)}),x(A(t),"handleClick",function(n,l,g){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},O=h.isPrevious,I=O!==void 0&&O,ee=h.isNext,de=ee!==void 0&&ee,oe=h.isBreak,V=oe!==void 0&&oe,te=h.isActive,ae=te!==void 0&&te;n.preventDefault?n.preventDefault():n.returnValue=!1;var ne=t.state.selected,w=t.props.onClick,$=g;if(w){var W=w({index:l,selected:ne,nextSelectedPage:g,event:n,isPrevious:I,isNext:de,isBreak:V,isActive:ae});if(W===!1)return;Number.isInteger(W)&&($=W)}$!==void 0&&t.handlePageChange($)}),x(A(t),"handleBreakClick",function(n,l){var g=t.state.selected;t.handleClick(l,n,g<n?t.getForwardJump():t.getBackwardJump(),{isBreak:!0})}),x(A(t),"callCallback",function(n){t.props.onPageChange!==void 0&&typeof t.props.onPageChange=="function"&&t.props.onPageChange({selected:n})}),x(A(t),"callActiveCallback",function(n){t.props.onPageActive!==void 0&&typeof t.props.onPageActive=="function"&&t.props.onPageActive({selected:n})}),x(A(t),"getElementPageRel",function(n){var l=t.state.selected,g=t.props,h=g.nextPageRel,O=g.prevPageRel,I=g.selectedPageRel;return l-1===n?O:l===n?I:l+1===n?h:void 0}),x(A(t),"pagination",function(){var n=[],l=t.props,g=l.pageRangeDisplayed,h=l.pageCount,O=l.marginPagesDisplayed,I=l.breakLabel,ee=l.breakClassName,de=l.breakLinkClassName,oe=l.breakAriaLabels,V=t.state.selected;if(h<=g)for(var te=0;te<h;te++)n.push(t.getPageElement(te));else{var ae=g/2,ne=g-ae;V>h-g/2?ae=g-(ne=h-V):V<g/2&&(ne=g-(ae=V));var w,$,W=function(re){return t.getPageElement(re)},T=[];for(w=0;w<h;w++){var pe=w+1;if(pe<=O)T.push({type:"page",index:w,display:W(w)});else if(pe>h-O)T.push({type:"page",index:w,display:W(w)});else if(w>=V-ae&&w<=V+(V===0&&g>1?ne-1:ne))T.push({type:"page",index:w,display:W(w)});else if(I&&T.length>0&&T[T.length-1].display!==$&&(g>0||O>0)){var me=w<V?oe.backward:oe.forward;$=p().createElement(Y,{key:w,breakAriaLabel:me,breakLabel:I,breakClassName:ee,breakLinkClassName:de,breakHandler:t.handleBreakClick.bind(null,w),getEventListener:t.getEventListener}),T.push({type:"break",index:w,display:$})}}T.forEach(function(re,se){var ge=re;re.type==="break"&&T[se-1]&&T[se-1].type==="page"&&T[se+1]&&T[se+1].type==="page"&&T[se+1].index-T[se-1].index<=2&&(ge={type:"page",index:re.index,display:W(re.index)}),n.push(ge.display)})}return n}),s.initialPage!==void 0&&s.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(s.initialPage,") and forcePage (").concat(s.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),v=s.initialPage?s.initialPage:s.forcePage?s.forcePage:0,t.state={selected:v},t}return o=_,(r=[{key:"componentDidMount",value:function(){var s=this.props,t=s.initialPage,v=s.disableInitialCallback,n=s.extraAriaContext,l=s.pageCount,g=s.forcePage;t===void 0||v||this.callCallback(t),n&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(l)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(l,"). Did you forget a Math.ceil()?")),t!==void 0&&t>l-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(l-1,").")),g!==void 0&&g>l-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(g," > ").concat(l-1,")."))}},{key:"componentDidUpdate",value:function(s){this.props.forcePage!==void 0&&this.props.forcePage!==s.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(s.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var s=this.state.selected,t=this.props,v=t.pageCount,n=s+t.pageRangeDisplayed;return n>=v?v-1:n}},{key:"getBackwardJump",value:function(){var s=this.state.selected-this.props.pageRangeDisplayed;return s<0?0:s}},{key:"getElementHref",value:function(s){var t=this.props,v=t.hrefBuilder,n=t.pageCount,l=t.hrefAllControls;if(v)return l||s>=0&&s<n?v(s+1,n,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(s){var t=s===this.state.selected;if(this.props.ariaLabelBuilder&&s>=0&&s<this.props.pageCount){var v=this.props.ariaLabelBuilder(s+1,t);return this.props.extraAriaContext&&!t&&(v=v+" "+this.props.extraAriaContext),v}}},{key:"getPageElement",value:function(s){var t=this.state.selected,v=this.props,n=v.pageClassName,l=v.pageLinkClassName,g=v.activeClassName,h=v.activeLinkClassName,O=v.extraAriaContext,I=v.pageLabelBuilder;return p().createElement(y,{key:s,pageSelectedHandler:this.handlePageSelected.bind(null,s),selected:t===s,rel:this.getElementPageRel(s),pageClassName:n,pageLinkClassName:l,activeClassName:g,activeLinkClassName:h,extraAriaContext:O,href:this.getElementHref(s),ariaLabel:this.ariaLabelBuilder(s),page:s+1,pageLabelBuilder:I,getEventListener:this.getEventListener})}},{key:"render",value:function(){var s=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&s!==void 0)return s&&s(this.props);var t=this.props,v=t.disabledClassName,n=t.disabledLinkClassName,l=t.pageCount,g=t.className,h=t.containerClassName,O=t.previousLabel,I=t.previousClassName,ee=t.previousLinkClassName,de=t.previousAriaLabel,oe=t.prevRel,V=t.nextLabel,te=t.nextClassName,ae=t.nextLinkClassName,ne=t.nextAriaLabel,w=t.nextRel,$=this.state.selected,W=$===0,T=$===l-1,pe="".concat(R(I)).concat(W?" ".concat(R(v)):""),me="".concat(R(te)).concat(T?" ".concat(R(v)):""),re="".concat(R(ee)).concat(W?" ".concat(R(n)):""),se="".concat(R(ae)).concat(T?" ".concat(R(n)):""),ge=W?"true":"false",Ae=T?"true":"false";return p().createElement("ul",{className:g||h,role:"navigation","aria-label":"Pagination"},p().createElement("li",{className:pe},p().createElement("a",G({className:re,href:this.getElementHref($-1),tabIndex:W?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":ge,"aria-label":de,rel:oe},this.getEventListener(this.handlePreviousPage)),O)),this.pagination(),p().createElement("li",{className:me},p().createElement("a",G({className:se,href:this.getElementHref($+1),tabIndex:T?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":Ae,"aria-label":ne,rel:w},this.getEventListener(this.handleNextPage)),V)))}}])&&J(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),_}(u.Component);x(F,"propTypes",{pageCount:a().number.isRequired,pageRangeDisplayed:a().number,marginPagesDisplayed:a().number,previousLabel:a().node,previousAriaLabel:a().string,prevPageRel:a().string,prevRel:a().string,nextLabel:a().node,nextAriaLabel:a().string,nextPageRel:a().string,nextRel:a().string,breakLabel:a().oneOfType([a().string,a().node]),breakAriaLabels:a().shape({forward:a().string,backward:a().string}),hrefBuilder:a().func,hrefAllControls:a().bool,onPageChange:a().func,onPageActive:a().func,onClick:a().func,initialPage:a().number,forcePage:a().number,disableInitialCallback:a().bool,containerClassName:a().string,className:a().string,pageClassName:a().string,pageLinkClassName:a().string,pageLabelBuilder:a().func,activeClassName:a().string,activeLinkClassName:a().string,previousClassName:a().string,nextClassName:a().string,previousLinkClassName:a().string,nextLinkClassName:a().string,disabledClassName:a().string,disabledLinkClassName:a().string,breakClassName:a().string,breakLinkClassName:a().string,extraAriaContext:a().string,ariaLabelBuilder:a().func,eventListener:a().string,renderOnZeroPageCount:a().func,selectedPageRel:a().string}),x(F,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(i){return i},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const Z=F})(),E})())})(Se);var xt=Se.exports;const vt=Te(xt);function bt(f){return ve({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M17.51 3.87 15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"},child:[]}]})(f)}function Ct(f){return ve({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"},child:[]}]})(f)}const yt=f=>{const{pageCount:c,pageRangeDisplayed:k,onPageChange:B,itemsPerPage:S}=f;return e.jsx("div",{className:"my-4",children:e.jsx(vt,{breakLabel:"...",nextLabel:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{children:"Next"}),e.jsx(Ct,{})]}),onPageChange:B,pageRangeDisplayed:k||4,pageCount:c,previousLabel:e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(bt,{}),e.jsx("span",{children:"Previous"})]}),renderOnZeroPageCount:null,containerClassName:"flex flex-wrap sm:flex-nowrap gap-y-1",pageClassName:"h-[36px] w-[36px] shadow-sm mx-[1px] rounded-sm flex bg-[#F1F1F1] ",activeClassName:"!bg-[#5569ff] text-white",nextClassName:"ml-[3px] shadow-sm rounded-[3px] flex items-center justify-center px-3 bg-[#F1F1F1]",previousClassName:"mr-[3px] shadow-sm rounded-[3px] flex items-center justify-center px-3 bg-[#F1F1F1]",pageLinkClassName:"w-full h-full flex items-center justify-center"})})};function jt(f){return ve({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"},child:[]}]})(f)}function zt(){var o;const[f,c]=b.useState(!1),[k,B]=b.useState([]),[S,C]=b.useState(null),[E,u]=b.useState(null),[p,N]=ce.useState(""),a=je(),[L,P]=ce.useState(!1),y={activeSort:""},j=_e({initialValues:y,onSubmit:r=>{}}),M=20,[Y,R]=ce.useState(1);let z={...j.values.activeSort&&{orderBy:j.values.activeSort},perPage:M,page:Y,searchTerm:p};const{data:G,isLoading:J}=rt(z),[H,U]=ot(),A=G!=null&&G.totalMovies?Math.ceil(G.totalMovies/z.perPage):0,m=b.useCallback(()=>{a.getMovies().then(r=>{D.dismiss(),B(r)})},[]);b.useCallback(r=>k.find(d=>d._id===r),[k]);const x=b.useCallback(r=>{r!=null&&H(r==null?void 0:r._id).then(()=>{D.dismiss(),D.success("deleted",{position:"top-right"}),u(null)}).catch(d=>{D.dismiss(),D.error("failed",{position:"top-right"}),console.error(d),u(null)})},[]);b.useEffect(()=>{S!=null&&c(!!S)},[S]),b.useEffect(()=>{f||C(null)},[f]);const F=r=>{const d=(r==null?void 0:r.selected)||0;R(d)},Z=r=>{const d=r.target.value;N(d),R(1)};return e.jsxs(e.Fragment,{children:[e.jsx(Me,{children:e.jsx("title",{children:"Movies - Configurations"})}),e.jsx(De,{children:e.jsx(et,{})}),e.jsxs(Qe,{maxWidth:"lg",children:[e.jsxs(Ce,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:3,children:[e.jsxs("div",{className:"px-7 flex flex-wrap sm:flex-nowrap w-full ",children:[e.jsx("div",{className:"flex gap-2",children:e.jsx(ie,{variant:"contained",onClick:()=>c(!0),children:"Add movie"})}),e.jsxs("div",{className:"text-[#030424] max-w-[400px] mx-4 bg-[#fff] border-2 border-[#E7E7E7] hover:border-[#AAAAAA] focus-within:border-[#AAAAAA] p-2 pl-[22px] font-medium rounded-[11px] text-[18px] flex items-center h-[44px] min-w-[150px] justify-between flex-1",children:[e.jsx("input",{placeholder:"e.g Spiderman",className:"w-full h-full",value:p||"",onChange:Z}),e.jsx(jt,{size:22,color:"#B3B3B3"})]}),e.jsx(ft,{open:L,onClick:()=>P(!L),initialValues:y,formik:j}),J||U.isLoading?e.jsx("img",{src:fe,alt:"Spinner"}):void 0]}),e.jsxs(Ce,{item:!0,xs:12,children:[e.jsx(Ye,{component:Re,children:e.jsxs(Ke,{"aria-label":"simple table",children:[e.jsx(Ze,{children:e.jsxs(ye,{children:[e.jsx(K,{children:"Title"}),e.jsx(K,{align:"right",children:"Link"}),e.jsx(K,{align:"right",children:"is serie"}),e.jsx(K,{align:"right",children:"Genres"}),e.jsx(K,{align:"right",children:"Actions"})]})}),e.jsx(Xe,{children:(o=G==null?void 0:G.movies)==null?void 0:o.map(r=>{var d;return e.jsxs(ye,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(K,{component:"th",scope:"row",children:r.title}),e.jsx(K,{align:"right",children:e.jsx("a",{href:r.video,target:"_blank",children:"see"})}),e.jsx(K,{component:"th",scope:"row",children:r.isSeries?"Yes":"No"}),e.jsx(K,{align:"right",children:(d=r.genre)==null?void 0:d.map((q,Q)=>e.jsxs("span",{children:[" ",q==null?void 0:q.title,r.genre.length!=Q+1?",":void 0]}))}),e.jsxs(K,{align:"right",children:[e.jsx(be,{sx:{p:"10px"},"aria-label":"menu",onClick:()=>C(r),children:e.jsx(We,{})}),e.jsx(be,{sx:{p:"10px"},onClick:()=>u(r),children:e.jsx(He,{})})]})]},r._id)})})]})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(yt,{onPageChange:F,pageCount:A,itemsPerPage:M})})]})]}),e.jsx(Oe,{anchor:"right",open:f,onClose:()=>{c(!1)},children:e.jsxs(le,{sx:{maxWidth:500},children:[e.jsxs(ue,{id:"modal-modal-title",variant:"h2",component:"h2",align:"center",marginTop:3,children:[S?"Update a movie":"Add a movie",e.jsx("span",{style:{position:"absolute",top:10,right:5,cursor:"pointer"},onClick:()=>c(!1),children:e.jsx(Ue,{})})]}),e.jsx(le,{padding:5,children:e.jsx(gt,{callback:m,item:S||null})})]})}),e.jsxs(ke,{open:E!=null,onClose:()=>u(null),"aria-labelledby":"delete tag group","aria-describedby":"Dialog displayed to confirm tag group delete",children:[e.jsx(Pe,{id:"alert-dialog-title",children:"Delete movie"}),e.jsx(Ne,{children:e.jsxs(Le,{id:"alert-dialog-description",children:["Are you sure to delete ",E==null?void 0:E.title," ?"]})}),e.jsxs(we,{children:[e.jsx(ie,{onClick:()=>u(null),children:"Cancel"}),e.jsx(ie,{onClick:()=>x(E),autoFocus:!0,children:"Delete"})]})]})]})]})}export{zt as default};
