import{s as w,B as i,r,u as C,b as E,c as L,d as S,e as T,f as b,j as e,W as A,T as R,a as W}from"./index-RN40GIN3.js";import{s as D}from"./spinner-raFFnsSl.js";import{C as k}from"./Container-JzitWhMj.js";import{C as B}from"./Card-_T_mgdHf.js";import{T as g}from"./TextField-nZuO35Fk.js";import"./FormControl-hzYzaU_O.js";import"./OutlinedInput-5k8n8BVu.js";import"./useFormControl-ymE63IOh.js";import"./InputLabel-OdKkbQhf.js";import"./Select-LOUEVqMY.js";import"./react-is.production.min-pGgGHoNV.js";import"./FormHelperText-7DzgE79G.js";const K=w(i)(()=>`
    overflow: auto;
    flex: 1;
    overflow-x: hidden;
    align-items: center;
`);function Q(){const[l,f]=r.useState(""),[c,x]=r.useState(""),[o,a]=r.useState("");C();const d=E(L);S();const h=T(),u=r.useRef(null),[j,y]=b();r.useEffect(()=>{d!=null&&h("/")},[d]);const p=async()=>{var n,m;const s={email:l,password:c};try{const t=await j(s);console.log(t),(n=t==null?void 0:t.data)!=null&&n.isAdmin&&((m=t==null?void 0:t.data)==null?void 0:m.isAdmin)!==!0&&a("Only administrators can login here"),t!=null&&t.data||a("Error encountered during login")}catch(t){console.error(t),a(t)}},v=s=>{s.key==="Enter"&&p()};return e.jsxs(K,{children:[e.jsx(A,{children:e.jsx("title",{children:"Login"})}),e.jsxs(k,{maxWidth:"sm",children:[e.jsx(i,{display:"flex",justifyContent:"center",py:5,alignItems:"center",children:e.jsx("img",{src:"/logo.png",style:{width:"50%"}})}),e.jsx(B,{sx:{p:2,mb:10,borderRadius:1},children:e.jsxs(i,{component:"form",sx:{"& .MuiTextField-root":{m:1}},children:[(o==null?void 0:o.length)>0?e.jsx(R,{color:"red",align:"center",children:o}):null,e.jsx(g,{label:"username",value:l,onChange:s=>f(s.target.value),onKeyDown:s=>{var n;s.key==="Enter"&&((n=u.current)==null||n.focus())},required:!0,fullWidth:!0}),e.jsx(g,{label:"password",type:"password",value:c,onChange:s=>x(s.target.value),inputRef:u,onKeyDown:v,required:!0,fullWidth:!0}),e.jsxs(i,{className:"flex gap-2",marginLeft:1,marginTop:3,children:[e.jsx(W,{variant:"contained",onClick:p,children:"Login"}),y.isLoading?e.jsx("img",{src:D}):void 0]})]})})]})]})}export{Q as default};
